# 实施计划：OpenClaw 前端嵌入式设置页 (最终确认版)

是的，您的理解完全正确。我的方案正是如此：

**“嵌入式设置页”意味着：**
当点击“设置”时，右侧的主区域（Main Area）不再显示聊天对话框（Chat List）和输入框（Input Box），而是直接**替换**渲染为设置页面（Settings Panel）。左侧的侧边栏（Sidebar）保持不变，用户随时可以点击侧边栏的会话列表切回聊天界面。

这就像您截图中的 Claude 界面一样，点击设置后，整个右侧变成了设置页。

## 1. API 更新 (`src/api/openclaw.js`)

*   新增 `connectOpenClaw(data)` 接口。
*   更新 `openClawChatStream` 支持 `user_id`。

## 2. 视图重构 (`src/views/GeminiLayout.vue`)

*   **状态管理**:
    *   使用 `showSettings` (bool) 控制主区域的显示内容。
    *   当 `showSettings === true` 时，`v-if` 显示设置容器，`v-else` 显示聊天容器。
    *   点击侧边栏的“设置”按钮 -> `showSettings = true`。
    *   点击侧边栏的“新对话”或“历史会话” -> `showSettings = false`。

*   **设置页组件化 (内嵌)**:
    *   设计一个全屏（指填满 Main Area）的设置容器。
    *   **布局**: 左右双栏布局（左侧菜单：General, Models, OpenClaw...；右侧：具体表单）。
    *   **OpenClaw 配置**:
        *   表单：Gateway URL, Session Key, Token/Password。
        *   SSH 高级选项：Switch 开关控制显示/隐藏 SSH 字段。
        *   操作：保存并连接。

*   **原有功能迁移**:
    *   将原弹窗里的“模型管理”、“AI 指令”等功能迁移到这个新的嵌入式设置页中。

## 3. 逻辑串联

*   在 OpenClaw 聊天模式下，如果接口返回“未配置”错误，自动触发 `showSettings = true` 并跳转到 OpenClaw 配置 Tab。

